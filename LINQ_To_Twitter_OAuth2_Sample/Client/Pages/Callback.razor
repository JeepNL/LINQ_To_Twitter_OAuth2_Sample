@page "/l2tcallback"
@using LINQ_To_Twitter_OAuth2_Sample.Client.Services
@inject AppDataService appDataService
@inject NavigationManager NavMan

@code {
    [Parameter][SupplyParameterFromQuery] public string? access_token { get; set; }
    [Parameter][SupplyParameterFromQuery] public string? refresh_token { get; set; }
    [Parameter][SupplyParameterFromQuery] public long expire_token_ticks { get; set; }
    [Parameter][SupplyParameterFromQuery] public string? user_id { get; set; }
    [Parameter][SupplyParameterFromQuery] public string? name { get; set; }
    [Parameter][SupplyParameterFromQuery] public bool access_denied { get; set; }

    protected override void OnInitialized()
    {
        if (!access_denied)
        {
            appDataService.AccessToken = access_token;
            appDataService.RefreshToken = refresh_token;
            appDataService.ExpireTokenTicks = expire_token_ticks;
            appDataService.UserId = user_id;
            appDataService.Name = name;
        }

        Console.WriteLine($"***** Callback.razor OnInitializedAsync");

        NavMan.NavigateTo("/");
    }
}
