@page "/l2tcallback"
@inject Blazored.LocalStorage.ILocalStorageService localStorage
@inject NavigationManager NavMan

@code {
    [Parameter]
    [SupplyParameterFromQuery]
    public string access_token { get; set; }
    [Parameter]
    [SupplyParameterFromQuery]
    public string refresh_token { get; set; }
    [Parameter]
    [SupplyParameterFromQuery]
    public string is_authenticated { get; set; }

    protected override async Task OnInitializedAsync()
    {
        L2TBase L2TTokens = new(access_token, refresh_token, DateTime.UtcNow.AddMinutes(115).Ticks); // 2 hours (Twitter default) - 5 minutes.
        await localStorage.SetItemAsync<L2TBase>("l2t_tokens", L2TTokens);
        NavMan.NavigateTo("/");
    }
}
